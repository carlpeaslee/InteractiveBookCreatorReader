/*! rsj.0.01.0 2016-04-07 */
var myApp=angular.module("myApp",["ngMaterial","ngMessages","ngRoute","ngSanitize"]);myApp.filter("sanitize",["$sce",function(a){return function(b){return a.trustAsHtml(b)}}]),myApp.config(["$mdThemingProvider",function(a){a.theme("default").primaryPalette("purple")}]),myApp.config(["$routeProvider",function(a){a.when("/admin",{templateUrl:"/assets/views/admin/main.html",controller:"AdminController"}).when("/login",{templateUrl:"/assets/views/login.html",controller:"AuthController"}).when("/readon",{templateUrl:"/assets/views/readon.html",controller:"ReadController"}).when("/aa",{templateUrl:"/assets/views/aa/test.html",controller:"ReadController"}).when("/library",{templateUrl:"/assets/views/library/library.html",controller:"LibraryController"}).when("/journal",{templateUrl:"/assets/views/journal/journal.html",controller:"JournalController"}).when("/questions",{templateUrl:"/assets/views/questions/questions.html",controller:"QuestionsController"}).when("/profile",{templateUrl:"/assets/views/profile/profile.html",controller:"ProfileController"}).otherwise({redirectTo:"/library"})}]),myApp.controller("AdminController",["$scope","$sce","AdminService",function(a,b,c){var d=c;a.newquestion={},a.newpage={},a.admin=d.admin,d.getQuestions(),a.submitNewQuestion=function(b){d.submitNewQuestion(b),a.newquestion={}},a.submitNewPage=function(b){d.submitNewPage(b),a.newpage={}}}]),myApp.controller("AuthController",["$scope","$window","AuthFactory",function(a,b,c){var d=this,e=c;d.loggedIn=e.checkLoggedIn()}]),myApp.controller("JournalController",["$scope","RSJService",function(a,b){a.journal={title:"",subDate:"",entry:""};var c="";a.todos=[{face:c,what:"Brunch this weekend?",who:"Min Li Chan",when:"3:08PM",notes:" I'll be in your neighborhood doing errands"},{face:c,what:"Brunch this weekend?",who:"Min Li Chan",when:"3:08PM",notes:" I'll be in your neighborhood doing errands"},{face:c,what:"Brunch this weekend?",who:"Min Li Chan",when:"3:08PM",notes:" I'll be in your neighborhood doing errands"},{face:c,what:"Brunch this weekend?",who:"Min Li Chan",when:"3:08PM",notes:" I'll be in your neighborhood doing errands"},{face:c,what:"Brunch this weekend?",who:"Min Li Chan",when:"3:08PM",notes:" I'll be in your neighborhood doing errands"}]}]),myApp.controller("LibraryController",["$scope","RSJService",function(a,b){}]),myApp.controller("NavController",["$scope","$window","AuthFactory",function(a,b,c){var d=this,e=c;d.displayLogout=!1,d.message={text:!1,type:"info"},e.isLoggedIn().then(function(a){a.data.status?(d.displayLogout=!0,e.setLoggedIn(!0),d.username=a.data.name):(d.displayLogout=!1,e.setLoggedIn(!1))},function(){d.message.text="Unable to properly authenticate user",d.message.type="error"}),d.logout=function(){e.logout().then(function(a){e.setLoggedIn(!1),d.username="",b.location.href="/"},function(a){d.message.text="Unable to logout",d.message.type="error"})}}]),myApp.controller("ProfileController",["$scope","RSJService",function(a,b){var c=b;a.user=c.user,c.initialUserDataCall(),a.updateUserProfile=function(a){c.postUserData(a)},a.states="AL AK AZ AR CA CO CT DE FL GA HI ID IL IN IA KS KY LA ME MD MA MI MN MS MO MT NE NV NH NJ NM NY NC ND OH OK OR PA RI SC SD TN TX UT VT VA WA WV WI WY".split(" ").map(function(a){return{abbrev:a}})}]),myApp.controller("QuestionsController",["$scope","RSJService",function(a,b){a.journal={title:"",subDate:"",entry:""};var c="";a.todos=[{face:c,what:"Brunch this weekend?",who:"Min Li Chan",when:"3:08PM",notes:" I'll be in your neighborhood doing errands"},{face:c,what:"Brunch this weekend?",who:"Min Li Chan",when:"3:08PM",notes:" I'll be in your neighborhood doing errands"},{face:c,what:"Brunch this weekend?",who:"Min Li Chan",when:"3:08PM",notes:" I'll be in your neighborhood doing errands"},{face:c,what:"Brunch this weekend?",who:"Min Li Chan",when:"3:08PM",notes:" I'll be in your neighborhood doing errands"},{face:c,what:"Brunch this weekend?",who:"Min Li Chan",when:"3:08PM",notes:" I'll be in your neighborhood doing errands"}]}]),myApp.controller("ReadController",["$scope","$sce","RSJService",function(a,b,c){var d=c;d.getPages(),a.pages=d.pages,a.currentPage=0,a.pageForward=function(){a.currentPage++},a.pageBackward=function(){a.currentPage--}}]),myApp.factory("AuthFactory",["$http",function(a){var b={loggedIn:!1};return{Status:b,checkLoggedIn:function(){return b.loggedIn},isLoggedIn:function(){return a.get("/auth")},setLoggedIn:function(a){b.loggedIn=a},logout:function(){return a.get("/auth/logout")}}}]),myApp.factory("AdminService",["$http",function(a){var b=function(){a.get("/admin/questions").then(function(a){g.questions=a.data})},c=function(c){a.post("/admin/newquestion",c).then(function(a){b()})},d=function(){a.get("/admin/pages").then(function(a){g.pages=a.data})},e=function(b){a.post("/admin/newpage",b).then(function(a){d()})},f=function(){void 0===g.questions&&b()},g={};return{getQuestions:b,submitNewQuestion:c,getPages:d,submitNewPage:e,initialCall:f,admin:g}}]),myApp.factory("RSJService",["$http",function(a){var b={},c={},d=function(){a.get("/pages").then(function(a){c.data=a.data})},e=function(){a.get("/user/profile").then(function(a){b.data=a.data})},f=function(b){a.post("/user/editprofile",b).then(function(a){e()})},g=function(){void 0===b.data&&e()};return{postUserData:f,getUserData:e,initialUserDataCall:g,getPages:d,user:b,pages:c}}]);